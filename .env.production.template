# Production Environment Configuration Template
# Copy this file to .env and configure with your production values

# Environment Configuration
ENVIRONMENT=production
DEBUG=false

# Security Keys (REQUIRED - Generate secure values)
SECRET_KEY=your-strong-secret-key-here-min-32-characters
ENCRYPTION_KEY=your-32-byte-encryption-key-here-exactly-32-chars

# Encryption Salts (CRITICAL for security - Generate unique per deployment)
TOKEN_ENCRYPTION_SALT=your-unique-token-salt-32-chars-minimum
USER_CREDENTIALS_SALT=your-unique-creds-salt-32-chars-minimum

# Database Configuration (REQUIRED)
DATABASE_URL=postgresql://user:password@hostname:5432/database_name?sslmode=require

# Redis Configuration (REQUIRED)
REDIS_URL=redis://redis-hostname:6379/0

# API Keys (Configure as needed)
OPENAI_API_KEY=sk-your-openai-api-key-here
XAI_API_KEY=your-xai-api-key-here
SERPER_API_KEY=your-serper-api-key-here

# Social Media Platform Credentials
# Twitter/X OAuth 2.0
TWITTER_CLIENT_ID=your-twitter-client-id
TWITTER_CLIENT_SECRET=your-twitter-client-secret

# Twitter API Legacy (if needed)
TWITTER_API_KEY=your-twitter-api-key
TWITTER_API_SECRET=your-twitter-api-secret
TWITTER_ACCESS_TOKEN=your-twitter-access-token
TWITTER_ACCESS_TOKEN_SECRET=your-twitter-access-token-secret
TWITTER_BEARER_TOKEN=your-twitter-bearer-token

# Meta Graph API (Facebook/Instagram)
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_ACCESS_TOKEN=your-meta-access-token
FACEBOOK_PAGE_ID=your-facebook-page-id
FACEBOOK_PAGE_ACCESS_TOKEN=your-facebook-page-access-token
INSTAGRAM_BUSINESS_ACCOUNT_ID=your-instagram-business-account-id

# Webhook Security Configuration (CRITICAL for production)
# Generate secure random strings for each webhook secret
META_WEBHOOK_SECRET=your-secure-meta-webhook-secret-32-chars-min
FACEBOOK_WEBHOOK_SECRET=your-secure-facebook-webhook-secret
INSTAGRAM_WEBHOOK_SECRET=your-secure-instagram-webhook-secret
TWITTER_WEBHOOK_SECRET=your-secure-twitter-webhook-secret
LINKEDIN_WEBHOOK_SECRET=your-secure-linkedin-webhook-secret
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# Webhook verification tokens (for initial setup)
META_VERIFY_TOKEN=your-meta-verification-token
FACEBOOK_WEBHOOK_VERIFY_TOKEN=your-facebook-verify-token
INSTAGRAM_WEBHOOK_VERIFY_TOKEN=your-instagram-verify-token

# Webhook security settings
WEBHOOK_ALLOW_UNSIGNED=false  # NEVER set to true in production

# Security & CORS (REQUIRED for production)
# List all allowed hostnames for security (comma-separated)
ALLOWED_HOSTS=api.lilymedia.ai,www.lilymedia.ai,lilymedia.ai
CORS_ORIGINS=https://lilymedia.ai,https://www.lilymedia.ai,https://app.lilymedia.ai

# Monitoring & Observability (Optional but recommended)
# Sentry for error tracking (leave empty if not using)
SENTRY_DSN=
# Prometheus metrics (set to false if not using)
PROMETHEUS_ENABLED=false
# OpenTelemetry tracing (leave empty if not using)
OTEL_EXPORTER_OTLP_ENDPOINT=

# Celery Task Queue Configuration
# Broker URL (uses Redis URL if not set)
CELERY_BROKER_URL=

# Celery Worker Configuration for Production Resilience
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH=4
CELERY_WORKER_POOL=prefork
CELERY_MAX_TASKS_PER_CHILD=100
CELERY_MAX_MEMORY_PER_CHILD=500000

# Feature Flags
DEMO_MODE=false
MOCK_SOCIAL_APIS=false
SHOW_SAMPLE_DATA=false
ENABLE_REGISTRATION=true
REQUIRE_EMAIL_VERIFICATION=true
FEATURE_PARTNER_OAUTH=true  # Enable Meta partner OAuth features

# CSRF Protection Configuration
CSRF_PROTECTION_ENABLED=true  # Enable CSRF protection (REQUIRED in production)
CSRF_COOKIE_NAME=csrftoken
CSRF_HEADER_NAME=X-CSRF-Token
CSRF_SECURE_COOKIE=true  # HTTPS only for CSRF cookie in production
CSRF_SAMESITE=Strict  # Strict SameSite policy for CSRF cookie
CSRF_ROTATE_ON_REQUEST=false  # Don't rotate token on every request (better UX)

# Timezone
TIMEZONE=America/New_York

# OpenTelemetry Observability Configuration
# Enable comprehensive distributed tracing and metrics collection
OTEL_ENABLED=true
OTEL_SERVICE_NAME=lily-media-api
OTEL_SERVICE_VERSION=2.0.0

# OTLP Exporter Configuration (for production observability platforms)
# Configure your observability platform endpoint (e.g., Datadog, New Relic, Grafana Cloud)
OTEL_EXPORTER_OTLP_ENDPOINT=https://your-otlp-endpoint.com
OTEL_API_KEY=your-observability-platform-api-key
OTEL_AUTH_TOKEN=your-observability-platform-auth-token

# Jaeger Tracing (for development and debugging)
# Leave empty in production unless specifically needed
JAEGER_AGENT_HOST=
JAEGER_AGENT_PORT=6832

# Prometheus Metrics Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8000

# Observability Feature Flags
# Enable/disable specific instrumentation
OTEL_INSTRUMENT_FASTAPI=true
OTEL_INSTRUMENT_SQLALCHEMY=true
OTEL_INSTRUMENT_REDIS=true
OTEL_INSTRUMENT_REQUESTS=true
OTEL_INSTRUMENT_CELERY=true

# Plan Enforcement and Quota Management Configuration
# Enable comprehensive plan-based feature gating and usage quotas
PLAN_ENFORCEMENT_ENABLED=true

# Plan-specific configuration
# Default plan for new users (free, basic, professional, enterprise)
DEFAULT_USER_PLAN=free

# Quota enforcement settings
QUOTA_RESET_HOUR=0  # Hour (UTC) when daily quotas reset (0-23)
QUOTA_WARNING_THRESHOLD=0.8  # Warn users when they reach 80% of quota
QUOTA_GRACE_PERIOD_HOURS=24  # Grace period before hard enforcement (for billing issues)

# Feature flags for plan enforcement
ENFORCE_API_QUOTAS=true
ENFORCE_FEATURE_ACCESS=true
ENFORCE_STORAGE_LIMITS=true

# Rate limiting integration
PLAN_BASED_RATE_LIMITING=true  # Apply different rate limits based on plan