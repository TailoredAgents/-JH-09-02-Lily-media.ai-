# LILY AI SOCIAL MEDIA - PRODUCTION ENVIRONMENT TEMPLATE
# Copy this file to .env.production and fill in actual values

# =============================================================================
# CRITICAL PARTNER OAUTH SETTINGS (GA CHECKLIST REQUIREMENT)
# =============================================================================

# Partner OAuth Feature Flags (REQUIRED for GA)
FEATURE_PARTNER_OAUTH=true
VITE_FEATURE_PARTNER_OAUTH=true

# Token Encryption (CRITICAL - Generate secure key)
TOKEN_ENCRYPTION_KEY=your-secure-32-char-encryption-key-here
TOKEN_ENCRYPTION_KID=default

# =============================================================================
# META/FACEBOOK CONFIGURATION (App Review Required)
# =============================================================================

# Meta App Credentials
META_APP_ID=your_meta_app_id
META_APP_SECRET=your_meta_app_secret
META_VERIFY_TOKEN=your_meta_webhook_verify_token

# Meta API Scopes (for App Review):
# - pages_show_list
# - pages_manage_posts  
# - pages_read_engagement
# - instagram_basic
# - instagram_content_publish
# - instagram_manage_insights
# - instagram_manage_comments (only if replying from Lily)

# Meta Business Verification
META_BUSINESS_VERIFICATION_STATUS=verified
META_DATA_DELETION_URL=https://your-domain.com/data-deletion

# =============================================================================
# X/TWITTER CONFIGURATION
# =============================================================================

# X API v2 Credentials
X_CLIENT_ID=your_x_client_id
X_CLIENT_SECRET=your_x_client_secret
X_BEARER_TOKEN=your_x_bearer_token

# X OAuth2 Configuration
X_OAUTH_CALLBACK_URL=https://your-domain.com/api/v1/partner/oauth/x/callback
X_WEBHOOK_URL=https://your-domain.com/webhooks/x

# X API Plan Level (ensure mentions polling is supported)
X_API_PLAN=basic_plus_or_higher

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Redis Rate Limiting
REDIS_RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_WINDOW=75
RATE_LIMIT_WINDOW_SECONDS=900
RATE_LIMIT_BURST_ALLOWANCE=5

# Circuit Breaker Settings
CIRCUIT_BREAKER_FAIL_THRESHOLD=3
CIRCUIT_BREAKER_COOLDOWN_SECONDS=60
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=5

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================

# Environment
ENVIRONMENT=production
DEBUG=false
PORT=8000
HOST=0.0.0.0

# Security
SECRET_KEY=your-super-secure-secret-key-change-this
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# Database (Production PostgreSQL)
DATABASE_URL=postgresql://username:password@host:port/database
POSTGRES_SSL_MODE=require

# Redis & Celery
REDIS_URL=redis://username:password@host:port/0
CELERY_BROKER_URL=redis://username:password@host:port/0
CELERY_RESULT_BACKEND=redis://username:password@host:port/0

# =============================================================================
# AI SERVICES
# =============================================================================

# OpenAI (Required)
OPENAI_API_KEY=sk-proj-your-openai-api-key
OPENAI_ORGANIZATION=org-your-org-id

# xAI for Image Generation
XAI_API_KEY=xai-your-xai-api-key

# Search (Optional)
SERPER_API_KEY=your-serper-api-key

# =============================================================================
# WEBHOOK CONFIGURATION (GA CHECKLIST)
# =============================================================================

# Meta Webhook Settings
META_WEBHOOK_VERIFY_TOKEN=your_meta_webhook_verify_token
META_WEBHOOK_SECRET=your_meta_webhook_secret

# X Webhook Settings  
X_WEBHOOK_VERIFY_TOKEN=your_x_webhook_verify_token
X_WEBHOOK_SECRET=your_x_webhook_secret

# Webhook Processing
WEBHOOK_PROCESSING_TIMEOUT=30
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=2

# =============================================================================
# CELERY BEAT SCHEDULES (GA CHECKLIST)
# =============================================================================

# Token Health Monitoring (Daily)
CELERY_BEAT_TOKEN_HEALTH_ENABLED=true
CELERY_BEAT_TOKEN_HEALTH_SCHEDULE=daily_at_2am

# X Mentions Polling (Every 15 minutes)  
CELERY_BEAT_X_MENTIONS_ENABLED=true
CELERY_BEAT_X_MENTIONS_SCHEDULE=every_15_minutes

# Retry/DLQ Watchdog
CELERY_BEAT_WATCHDOG_ENABLED=true
CELERY_BEAT_WATCHDOG_SCHEDULE=every_5_minutes

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json
STRUCTURED_LOGGING=true

# Metrics Collection
METRICS_ENABLED=true
PROMETHEUS_METRICS=true
GRAFANA_DASHBOARD=true

# Monitoring Dashboards
MONITOR_QUEUE_DEPTH=true
MONITOR_PUBLISH_SUCCESS_FAIL=true
MONITOR_THROTTLE_COUNT=true
MONITOR_CIRCUIT_BREAKER_STATE=true
MONITOR_TOKEN_REFRESH_OUTCOMES=true

# Alert Configuration
ALERTS_REPEATED_429_5XX=true
ALERTS_FAILED_REFRESH=true
ALERTS_WEBHOOK_VERIFICATION_FAILURES=true

# =============================================================================
# PRIVACY, LEGAL, UX (GA CHECKLIST)
# =============================================================================

# Public URLs (Required for App Review)
PRIVACY_POLICY_URL=https://your-domain.com/privacy
TERMS_OF_SERVICE_URL=https://your-domain.com/terms

# Data Retention
DATA_RETENTION_DAYS=365
SOCIAL_AUDIT_RETENTION_DAYS=90
AUTO_DELETE_EXPIRED_TOKENS=true

# =============================================================================
# CORS & SECURITY
# =============================================================================

# CORS Configuration
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
ALLOWED_HOSTS=your-domain.com,www.your-domain.com

# SSL/TLS
FORCE_HTTPS=true
SECURE_COOKIES=true
SECURE_HEADERS=true

# =============================================================================
# CUTOVER PLAN CONFIGURATION
# =============================================================================

# Feature Rollout
PARTNER_OAUTH_ROLLOUT_PERCENTAGE=0
CANARY_DEPLOYMENT=true
GRADUAL_ROLLOUT_ENABLED=true

# Rollback Settings
ROLLBACK_WEBHOOK_UNSUBSCRIBE=true
ROLLBACK_REVOKE_APP_ACCESS=false

# Legacy Support
LEGACY_USER_POSTING_ENABLED=true
REQUIRE_TEST_DRAFT_FOR_MIGRATION=true

# =============================================================================
# PERFORMANCE & RESOURCE LIMITS
# =============================================================================

# API Rate Limits
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=3600

# Resource Limits
MAX_CONCURRENT_TASKS=10
MAX_MEMORY_PER_WORKER=512MB
MAX_CPU_PER_WORKER=1.0

# Cache Settings
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true